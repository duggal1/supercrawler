---
title: Photo Blog with Admin Panel
description: No description
keywords: No keywords
canonicalUrl: https://vercel.com/templates/next.js/photo-blog
---

## Table of Contents

{/* Auto-generated table of contents */}

[Skip to content](#geist-skip-)

* ProductsDX Platform[Previews Helping teams ship 6√ó faster](/products/previews)[AI Powering breakthroughs](/ai)Managed Infrastructure[Fluid compute Servers, in serverless form](/fluid)[Rendering Fast, scalable, and reliable](/products/rendering)[Observability Trace every step](/products/observability)[Security Scale without compromising](/security)Open Source[Next.js The native Next.js platform](/frameworks/nextjs)[Turborepo Speed with Enterprise scale](/solutions/turborepo)[AI SDK The AI Toolkit for Type](https://sdk.vercel.ai/)
* DX Platform[Previews Helping teams ship 6√ó faster](/products/previews)[AI Powering breakthroughs](/ai)
* [Previews Helping teams ship 6√ó faster](/products/previews)
* [AI Powering breakthroughs](/ai)
* Managed Infrastructure[Fluid compute Servers, in serverless form](/fluid)[Rendering Fast, scalable, and reliable](/products/rendering)[Observability Trace every step](/products/observability)[Security Scale without compromising](/security)
* [Fluid compute Servers, in serverless form](/fluid)
* [Rendering Fast, scalable, and reliable](/products/rendering)
* [Observability Trace every step](/products/observability)
* [Security Scale without compromising](/security)
* Open Source[Next.js The native Next.js platform](/frameworks/nextjs)[Turborepo Speed with Enterprise scale](/solutions/turborepo)[AI SDK The AI Toolkit for Type](https://sdk.vercel.ai/)
* [Next.js The native Next.js platform](/frameworks/nextjs)
* [Turborepo Speed with Enterprise scale](/solutions/turborepo)
* [AI SDK The AI Toolkit for Type](https://sdk.vercel.ai/)
* SolutionsUse Cases[AI Apps Deploy at the speed of AI](/solutions/ai-apps)[Composable Commerce Power storefronts that convert](/solutions/composable-commerce)[Marketing Sites Launch campaigns fast](/solutions/marketing-sites)[Multi-tenant Platforms Scale apps with one codebase](/solutions/multi-tenant-saas)[Web Apps Ship features, not infrastructure](/solutions/web-apps)Users[Platform Engineers Automate away repetition](/solutions/platform-engineering)[Design Engineers Deploy for every idea](/solutions/design-engineering)
* Use Cases[AI Apps Deploy at the speed of AI](/solutions/ai-apps)[Composable Commerce Power storefronts that convert](/solutions/composable-commerce)[Marketing Sites Launch campaigns fast](/solutions/marketing-sites)[Multi-tenant Platforms Scale apps with one codebase](/solutions/multi-tenant-saas)[Web Apps Ship features, not infrastructure](/solutions/web-apps)
* [AI Apps Deploy at the speed of AI](/solutions/ai-apps)
* [Composable Commerce Power storefronts that convert](/solutions/composable-commerce)
* [Marketing Sites Launch campaigns fast](/solutions/marketing-sites)
* [Multi-tenant Platforms Scale apps with one codebase](/solutions/multi-tenant-saas)
* [Web Apps Ship features, not infrastructure](/solutions/web-apps)
* Users[Platform Engineers Automate away repetition](/solutions/platform-engineering)[Design Engineers Deploy for every idea](/solutions/design-engineering)
* [Platform Engineers Automate away repetition](/solutions/platform-engineering)
* [Design Engineers Deploy for every idea](/solutions/design-engineering)
* ResourcesTools[Resource Center Today‚Äôs best practices](/resources)[Marketplace Extend and automate workflows](/marketplace)[Templates Jumpstart app development](/templates)[Guides Find help quickly](/guides)[Partner Finder Get help from solution partners](/partners/solution-partners)Company[Customers Trusted by the best teams](/customers)[Blog The latest posts and changes](/blog)[Changelog See what shipped](/changelog)[Press Read the latest news](/press)
* Tools[Resource Center Today‚Äôs best practices](/resources)[Marketplace Extend and automate workflows](/marketplace)[Templates Jumpstart app development](/templates)[Guides Find help quickly](/guides)[Partner Finder Get help from solution partners](/partners/solution-partners)
* [Resource Center Today‚Äôs best practices](/resources)
* [Marketplace Extend and automate workflows](/marketplace)
* [Templates Jumpstart app development](/templates)
* [Guides Find help quickly](/guides)
* [Partner Finder Get help from solution partners](/partners/solution-partners)
* Company[Customers Trusted by the best teams](/customers)[Blog The latest posts and changes](/blog)[Changelog See what shipped](/changelog)[Press Read the latest news](/press)
* [Customers Trusted by the best teams](/customers)
* [Blog The latest posts and changes](/blog)
* [Changelog See what shipped](/changelog)
* [Press Read the latest news](/press)
* [Enterprise](/enterprise)
* [Docs](/docs)
* [Pricing](/pricing)

[Log In](/login)

[Contact](/contact)

[Sign Up](/signup)

[‚Üê Back to Templates](/templates)

[sambecker/exif-photo-blog](https://github.com/sambecker/exif-photo-blog)

# Photo Blog with Admin Panel

EXIF-based photo blog with built-in admin panel, Vercel Postgres as CMS, and Vercel Blob for image storage.

[Deploy](/new/clone?demo-deion=Store%20photos%20with%20original%20camera%20data&demo-image=%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F39rys245Px3FVBGRJNYEON%2Fbf68d5c052bda9e9e5bec21878764bc3%2Fimage.png&demo-title=Photo%20Blog&demo-url=https%3A%2F%2Fphotos.sambecker.com&from=templates&project-name=Photo%20Blog&repository-name=exif-photo-blog&repository-url=https%3A%2F%2Fgithub.com%2Fsambecker%2Fexif-photo-blog&skippable-integrations=1&stores=%5B%7B%22type%22%3A%22postgres%22%7D%2C%7B%22type%22%3A%22blob%22%7D%5D&teamCreateStatus=hidden)

[View Demo](https://photos.sambecker.com/)

[Next.js](/templates/next.js)

[Blog](/templates/blog)

[Authentication](/templates/authentication)

[Tailwind](/templates/tailwind)

[Vercel Postgres](/templates/vercel-postgres)

[Vercel Blob](/templates/vercel-blob)

[NextAuth.js](/templates/nextauth.js)

![Photo Blog Thumbnail](/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F39rys245Px3FVBGRJNYEON%2Fbf68d5c052bda9e9e5bec21878764bc3%2Fimage.png&w=3840&q=75)

## üì∑  EXIF  Photo Blog

[https://github.com/sambecker/exif-photo-blog/assets/169298/4253ea54-558a-4358-8834-89943cfbafb4](https://github.com/sambecker/exif-photo-blog/assets/169298/4253ea54-558a-4358-8834-89943cfbafb4)

[](https://vercel.com/new/sambecker-pro/clone?demo-deion=Store%20photos%20with%20original%20camera%20data&demo-image=%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F39rys245Px3FVBGRJNYEON%2Fbf68d5c052bda9e9e5bec21878764bc3%2Fimage.png&demo-title=Photo%20Blog&demo-url=https%3A%2F%2Fphotos.sambecker.com&from=templates&project-name=Photo%20Blog&repository-name=exif-photo-blog&repository-url=https%3A%2F%2Fgithub.com%2Fsambecker%2Fexif-photo-blog&skippable-integrations=1&stores=%5B%7B%22type%22%3A%22postgres%22%7D%2C%7B%22type%22%3A%22blob%22%7D%5D&teamCreateStatus=hidden)

### üé¨ ¬† ¬† Demo

[https://photos.sambecker.com](https://photos.sambecker.com)

### ‚ú® ¬† ¬† Features

* Built-in auth
* Photo upload with EXIF extraction
* Organize photos by tag
* Infinite scroll
* Light/dark mode
* Automatic OG image generation
* CMD-K menu with photo search
* AI-generated text deions
* Support for Fujifilm recipes and film simulations

### üõ†Ô∏è ¬† ¬† Installation

#### 1. Deploy to Vercel

1. Click[Deploy](https://vercel.com/new/clone?demo-title=Photo+Blog&demo-deion=Store+photos+with+original+camera+data&demo-url=https%3A%2F%2Fphotos.sambecker.com&demo-image=https%3A%2F%2Fphotos.sambecker.com%2Ftemplate-image-tight&project-name=Photo+Blog&repository-name=exif-photo-blog&repository-url=https%3A%2F%2Fgithub.com%2Fsambecker%2Fexif-photo-blog&from=templates&skippable-integrations=1&teamCreateStatus=hidden&stores=%5B%7B%22type%22%3A%22postgres%22%7D%2C%7B%22type%22%3A%22blob%22%7D%5D)
1. Add required storage ([Vercel Postgres](https://vercel.com/docs/storage/vercel-postgres/quickstart#create-a-postgres-database)+[Vercel Blob](https://vercel.com/docs/storage/vercel-blob/quickstart#create-a-blob-store)) as part of template installation
1. Configure environment variable for production domain in project settings`NEXT_PUBLIC_SITE_DOMAIN`(e.g., photos.domain.com‚Äîused in absolute urls and seen in igation if no explicit  title is set)
1. `NEXT_PUBLIC_SITE_DOMAIN`(e.g., photos.domain.com‚Äîused in absolute urls and seen in igation if no explicit  title is set)

#### 2. Setup Auth

1. [Generate auth secret](https://generate-secret.vercel.app/32)and add to environment variables:`AUTH_SECRET`
1. `AUTH_SECRET`
1. Add admin user to environment variables:`ADMIN_EMAIL``ADMIN_PASSWORD`
1. `ADMIN_EMAIL`
1. `ADMIN_PASSWORD`
1. Trigger redeployVisit project on Vercel, igate to "Deployments" tab, click ‚Ä¢‚Ä¢‚Ä¢ button next to most recent deployment, and select "Redeploy"
1. Visit project on Vercel, igate to "Deployments" tab, click ‚Ä¢‚Ä¢‚Ä¢ button next to most recent deployment, and select "Redeploy"

#### 3. Upload your first photo üéâ

1. Visit`/admin`
1. Sign in with credentials supplied in Step 2
1. Click "Upload Photos"
1. Add optional title
1. Click "Create"

If you don't plan to change the code, or don't mind making your updates public, consider forking this repo to easily receive future updates. If you've already setup your project on Vercel see detailed instructions here on reconfiguring your project.

### üîÑ ¬† ¬† Receiving updates

If you don't plan to change the code, or don't mind making your updates public, consider[forking](https://github.com/sambecker/exif-photo-blog/fork)this repo to easily receive future updates. If you've already set up your project on Vercel see thesemigration instructions.

### üíª ¬† ¬† Local development

1. Clone code
1. Run`pnpm i`to install dependencies
1. If necessary, install[Vercel CLI](https://vercel.com/docs/cli#installing-vercel-cli)and authenticate by running`vercel login`
1. Run`vercel link`to connect CLI to your project
1. Run`vercel dev`to start dev server with Vercel-managed environment variables

See FAQ forlimitations of local development

### üé® ¬† ¬† Further customization

#### AI text generation

*‚ö†Ô∏è READ BEFORE PROCEEDING*

> *Usage of this feature will result in fees from OpenAI. When enabling AI text generation, follow all recommended mitigations in order to avoid unexpected charges and attacks. Make sure your OpenAI secret key environment variable is not prefixed with NEXT_PUBLIC.*
>

1. Setup OpenAIIf you don't already have one, create an[OpenAI](https://openai.com)account and fund it (see[this thread](https://github.com/sambecker/exif-photo-blog/issues/110)if you're having issues)Generate an API key and store in environment variable`OPENAI_SECRET_KEY`Setup usage limits to avoid unexpected charges (*recommended*)
1. If you don't already have one, create an[OpenAI](https://openai.com)account and fund it (see[this thread](https://github.com/sambecker/exif-photo-blog/issues/110)if you're having issues)
1. Generate an API key and store in environment variable`OPENAI_SECRET_KEY`
1. Setup usage limits to avoid unexpected charges (*recommended*)
1. Add rate limiting (*recommended*)As an additional precaution, create an Upstash Redis store from the storage tab of the Vercel dashboard and link it to your project in order to enable rate limiting‚Äîno further configuration necessary
1. As an additional precaution, create an Upstash Redis store from the storage tab of the Vercel dashboard and link it to your project in order to enable rate limiting‚Äîno further configuration necessary
1. Configure auto-generated fields (optional)Set which text fields auto-generate when uploading a photo by storing a comma-separated list, e.g.,`AI_TEXT_AUTO_GENERATED_FIELDS = title,semantic`Accepted values:`all``title`(default)`caption``tags`(default)`semantic`(default)`none`
1. Set which text fields auto-generate when uploading a photo by storing a comma-separated list, e.g.,`AI_TEXT_AUTO_GENERATED_FIELDS = title,semantic`
1. Accepted values:`all``title`(default)`caption``tags`(default)`semantic`(default)`none`
1. `all`
1. `title`(default)
1. `caption`
1. `tags`(default)
1. `semantic`(default)
1. `none`

#### Web Analytics

1. Open project on Vercel
1. Click "Analytics" tab
1. Follow "Enable Web Analytics" instructions (`@vercel/analytics`already included)

#### Speed Insights

1. Open project on Vercel
1. Click "Speed Insights" tab
1. Follow "Enable Speed Insights" instructions (`@vercel/speed-insights`already included)

#### Optional configuration

Application behavior can be changed by configuring the following environment variables:

* `NEXT_PUBLIC_META_TITLE`(seen in search results and browser tab)
* `NEXT_PUBLIC_META_DEION`(seen in search results)
* `NEXT_PUBLIC__TITLE`(defaults to domain when not configured)
* `NEXT_PUBLIC__CAPTION`(seen in igation, beneath title)
* `NEXT_PUBLIC_PAGE_ABOUT`(seen in grid ‚Äîaccepts rich formatting tags:`<b>`,`<strong>`,`<i>`,`<em>`,`<u>`,`<br>`)

> ‚ö†Ô∏è Enabling may result in increased project usage. Static optimizationtroubleshooting hintsin FAQ.
>

* `NEXT_PUBLIC_STATICALLY_OPTIMIZE_PHOTOS = 1`enables static optimization for photo pages (`p/[photoId]`), i.e., renders pages at build time
* `NEXT_PUBLIC_STATICALLY_OPTIMIZE_PHOTO_OG_IMAGES = 1`enables static optimization for OG images, i.e., renders images at build time
* `NEXT_PUBLIC_STATICALLY_OPTIMIZE_PHOTO_CATEGORIES = 1`enables static optimization for photo categories (`tag/[tag]`,`shot-on/[make]/[model]`, etc.), i.e., renders pages at build time
* `NEXT_PUBLIC_STATICALLY_OPTIMIZE_PHOTO_CATEGORY_OG_IMAGES = 1`enables static optimization for photo category (`tag/[tag]`,`shot-on/[make]/[model]`, etc.) OG images, i.e., renders images at build time
* `NEXT_PUBLIC_PRESERVE_ORIGINAL_UPLOADS = 1`prevents photo uploads being compressed before storing
* `NEXT_PUBLIC_IMAGE_QUALITY = 1-100`controls the quality of large photos
* `NEXT_PUBLIC_BLUR_DISABLED = 1`prevents image blur data being stored and displayed (potentially useful for limiting Postgres usage)

* `NEXT_PUBLIC_DEFAULT_THEME = light | dark`sets preferred initial theme (defaults to`system`when not configured)
* `NEXT_PUBLIC_MATTE_PHOTOS = 1`constrains the size of each photo, and displays a surrounding border, potentially useful for photos with tall aspect ratios (colors can be customized via`NEXT_PUBLIC_MATTE_COLOR`+`NEXT_PUBLIC_MATTE_COLOR_DARK`)

* `NEXT_PUBLIC_CATEGORY_VISIBILITY`Comma-separated value controlling which photo sets appear in grid  and CMD-K menu, and in what order. For example, you could move cameras above tags, and hide film simulations, by updating to`cameras,tags,lenses,recipes`.Accepted values:`tags`(default)`cameras`(default)`lenses`(default)`recipes`(default)`films`(default)`focal-lengths`
* Comma-separated value controlling which photo sets appear in grid  and CMD-K menu, and in what order. For example, you could move cameras above tags, and hide film simulations, by updating to`cameras,tags,lenses,recipes`.
* Accepted values:`tags`(default)`cameras`(default)`lenses`(default)`recipes`(default)`films`(default)`focal-lengths`
* `tags`(default)
* `cameras`(default)
* `lenses`(default)
* `recipes`(default)
* `films`(default)
* `focal-lengths`
* `NEXT_PUBLIC_EXHAUSTIVE__CATEGORIES = 1`always shows expanded  content
* `NEXT_PUBLIC_HIDE_EXIF_DATA = 1`hides EXIF data in photo details and OG images (potentially useful for portfolios, which don't focus on photography)
* `NEXT_PUBLIC_HIDE_ZOOM_CONTROLS = 1`hides fullscreen photo zoom controls
* `NEXT_PUBLIC_HIDE_TAKEN_AT_TIME = 1`hides taken at time from photo meta
* `NEXT_PUBLIC_HIDE_SOCIAL = 1`removes X (formerly Twitter) button from share modal
* `NEXT_PUBLIC_HIDE_REPO_LINK = 1`removes  link to repo

* `NEXT_PUBLIC_GRID_HOMEPAGE = 1`shows grid layout on homepage
* `NEXT_PUBLIC_GRID_ASPECT_RATIO = 1.5`sets aspect ratio for grid tiles (defaults to`1`‚Äîsetting to`0`removes the constraint)
* `NEXT_PUBLIC_SHOW_LARGE_THUMBNAILS = 1`ensures large thumbnails on photo grid views (if not configured, density is based on aspect ratio)

* `NEXT_PUBLIC_GEO_PRIVACY = 1`disables collection/display of location-based data (‚ö†Ô∏è re-compresses uploaded images in order to remove GPS information)
* `NEXT_PUBLIC_ALLOW_PUBLIC_DOWNLOADS = 1`enables public photo downloads for all visitors (‚ö†Ô∏è may result in increased bandwidth usage)
* `NEXT_PUBLIC_PUBLIC_API = 1`enables public API available at`/api`
* `NEXT_PUBLIC_IGNORE_PRIORITY_ORDER = 1`prevents`priority_order`field affecting photo order
* `NEXT_PUBLIC_OG_TEXT_ALIGNMENT = BOTTOM`keeps OG image text bottom aligned (default is top)

### Alternate storage providers

Only one storage adapter‚ÄîVercel Blob, Cloudflare R2, or AWS S3‚Äîcan be used at a time. Ideally, this is configured before photos are uploaded (see[Issue #34](https://github.com/sambecker/exif-photo-blog/issues/34)for migration considerations). If you have multiple adapters, you can set one as preferred by storing`aws-s3`,`cloudflare-r2`, or`vercel-blob`in`NEXT_PUBLIC_STORAGE_PREFERENCE`. SeeFAQregarding unsupported providers.

#### Cloudflare R2

1. Setup bucket[Create R2 bucket](https://developers.cloudflare.com/r2/)with default settingsSetup CORS under bucket settings:`[{"Alloweds":["*"],"AllowedMethods":["GET","PUT"],"AllowedOrigins":["http://localhost:3000","https://{VERCEL_PROJECT_NAME}*.vercel.app","{PRODUCTION_DOMAIN}"]}]`Enable public hosting by doing one of the following:Select "Connect Custom Domain" and choose a Cloudflare domainORSelect "Allow Access" from R2.dev subdomainStore public configuration:`NEXT_PUBLIC_CLOUDFLARE_R2_BUCKET`: bucket name`NEXT_PUBLIC_CLOUDFLARE_R2_ACCOUNT_ID`: account id (found on R2 overview page)`NEXT_PUBLIC_CLOUDFLARE_R2_PUBLIC_DOMAIN`: either "your-custom-domain.com" or "pub-jf90908...s0d9f8s0s9df.r2.dev"
1. [Create R2 bucket](https://developers.cloudflare.com/r2/)with default settings
1. Setup CORS under bucket settings:
1. Enable public hosting by doing one of the following:Select "Connect Custom Domain" and choose a Cloudflare domainORSelect "Allow Access" from R2.dev subdomain
1. Select "Connect Custom Domain" and choose a Cloudflare domain
1. OR
1. Select "Allow Access" from R2.dev subdomain
1. Store public configuration:`NEXT_PUBLIC_CLOUDFLARE_R2_BUCKET`: bucket name`NEXT_PUBLIC_CLOUDFLARE_R2_ACCOUNT_ID`: account id (found on R2 overview page)`NEXT_PUBLIC_CLOUDFLARE_R2_PUBLIC_DOMAIN`: either "your-custom-domain.com" or "pub-jf90908...s0d9f8s0s9df.r2.dev"
1. `NEXT_PUBLIC_CLOUDFLARE_R2_BUCKET`: bucket name
1. `NEXT_PUBLIC_CLOUDFLARE_R2_ACCOUNT_ID`: account id (found on R2 overview page)
1. `NEXT_PUBLIC_CLOUDFLARE_R2_PUBLIC_DOMAIN`: either "your-custom-domain.com" or "pub-jf90908...s0d9f8s0s9df.r2.dev"
1. Setup private credentialsCreate API token by selecting "Manage R2 API Tokens," and clicking "Create API Token"Select "Object Read & Write," choose "Apply to specific buckets only," and select the bucket created in Step 1Store credentials (‚ö†Ô∏è*Ensure access keys are not prefixed with`NEXT_PUBLIC`*):`CLOUDFLARE_R2_ACCESS_KEY``CLOUDFLARE_R2_SECRET_ACCESS_KEY`
1. Create API token by selecting "Manage R2 API Tokens," and clicking "Create API Token"
1. Select "Object Read & Write," choose "Apply to specific buckets only," and select the bucket created in Step 1
1. Store credentials (‚ö†Ô∏è*Ensure access keys are not prefixed with`NEXT_PUBLIC`*):`CLOUDFLARE_R2_ACCESS_KEY``CLOUDFLARE_R2_SECRET_ACCESS_KEY`
1. `CLOUDFLARE_R2_ACCESS_KEY`
1. `CLOUDFLARE_R2_SECRET_ACCESS_KEY`

#### AWS S3

1. Setup bucket[Create S3 bucket](https://s3.console.aws.amazon.com/s3)with "ACLs enabled," and "Block all public access" turned offSetup CORS under bucket permissions:`[{"Alloweds":["*"],"AllowedMethods":["GET","PUT"],"AllowedOrigins":["http://localhost:*","https://{VERCEL_PROJECT_NAME}*.vercel.app","{PRODUCTION_DOMAIN}"],"Exposes":[]}]`Store public configuration`NEXT_PUBLIC_AWS_S3_BUCKET`: bucket name`NEXT_PUBLIC_AWS_S3_REGION`: bucket region, e.g., "us-east-1"
1. [Create S3 bucket](https://s3.console.aws.amazon.com/s3)with "ACLs enabled," and "Block all public access" turned off
1. Setup CORS under bucket permissions:`[{"Alloweds":["*"],"AllowedMethods":["GET","PUT"],"AllowedOrigins":["http://localhost:*","https://{VERCEL_PROJECT_NAME}*.vercel.app","{PRODUCTION_DOMAIN}"],"Exposes":[]}]`
1. Store public configuration`NEXT_PUBLIC_AWS_S3_BUCKET`: bucket name`NEXT_PUBLIC_AWS_S3_REGION`: bucket region, e.g., "us-east-1"
1. `NEXT_PUBLIC_AWS_S3_BUCKET`: bucket name
1. `NEXT_PUBLIC_AWS_S3_REGION`: bucket region, e.g., "us-east-1"
1. Setup private credentials[Create IAM policy](https://console.aws.amazon.com/iam/home#/policies)using JSON editor:`{"Version":"2012-10-17","Statement":[{"Effect":"Allow","Action":["s3:PutObject","s3:PutObjectACL","s3:GetObject","s3:ListBucket","s3:DeleteObject"],"Resource":["arn:aws:s3:::{BUCKET_NAME}","arn:aws:s3:::{BUCKET_NAME}/*"]}]}`[Create IAM user](https://console.aws.amazon.com/iam/home#/users)by choosing "Attach policies directly," and selecting the policy created above. Create "Access key" under "Security credentials," choose "Application running outside AWS," and store credentials (‚ö†Ô∏è*Ensure access keys are not prefixed with`NEXT_PUBLIC`*):`AWS_S3_ACCESS_KEY``AWS_S3_SECRET_ACCESS_KEY`
1. [Create IAM policy](https://console.aws.amazon.com/iam/home#/policies)using JSON editor:`{"Version":"2012-10-17","Statement":[{"Effect":"Allow","Action":["s3:PutObject","s3:PutObjectACL","s3:GetObject","s3:ListBucket","s3:DeleteObject"],"Resource":["arn:aws:s3:::{BUCKET_NAME}","arn:aws:s3:::{BUCKET_NAME}/*"]}]}`
1. [Create IAM user](https://console.aws.amazon.com/iam/home#/users)by choosing "Attach policies directly," and selecting the policy created above. Create "Access key" under "Security credentials," choose "Application running outside AWS," and store credentials (‚ö†Ô∏è*Ensure access keys are not prefixed with`NEXT_PUBLIC`*):`AWS_S3_ACCESS_KEY``AWS_S3_SECRET_ACCESS_KEY`
1. `AWS_S3_ACCESS_KEY`
1. `AWS_S3_SECRET_ACCESS_KEY`

### Alternate database providers (experimental)

Vercel Postgres can be switched to another Postgres-compatible, pooling provider by updating`POSTGRES_URL`. Some providers only work when SSL is disabled, which can configured by setting`DISABLE_POSTGRES_SSL = 1`.

#### Supabase

1. Ensure connection string is set to "Transaction Mode" via port`6543`
1. Disable SSL by setting`DISABLE_POSTGRES_SSL = 1`

### üìñ ¬† ¬† FAQ

> For forked repos, click "Code," then "Update branch" from the main repo page. If you originally cloned the code, you can[create a fork](https://github.com/sambecker/exif-photo-blog/fork)from GitHub, then update your Git connection from your Vercel project settings. Once you've done this, you may need to go to your project deployments page, click ‚Ä¢‚Ä¢‚Ä¢, select "Create deployment," and choose`main`.
>

> On desktop, select ‚Ä¢‚Ä¢‚Ä¢ menu in the top right next to site title and choose, "Select Multiple." On mobile, "Select Multiple Photos" can be accessed from the search menu. From there, you can perform bulk tag, favorite, and delete actions.
>

> This template statically optimizes core views such as`/`and`/grid`to minimize visitor load times. Consequently, when photos are added, edited, or removed, it might take several minutes for those changes to propagate. If it seems like a change is not taking effect, try igating to`/admin/configuration`and clicking "Clear Cache."
>

> There have been reports ([Issue 184](https://github.com/sambecker/exif-photo-blog/issues/184#issuecomment-2629474045)+[185](https://github.com/sambecker/exif-photo-blog/issues/185#issuecomment-2629478570)) that having large photos (over 30MB), or a CDN, e.g., Cloudflare in front of Vercel, may destabilize static optimization.
>

> As the template has evolved, EXIF fields (such as lenses) have been added, blur data is generated through a different method, and AI/privacy features have been added. In order to bring older photos up to date, either click the 'sync' button next to a photo or use the outdated photo page (`/admin/outdated`) to make batch updates.
>

> Many services such as iMessage, Slack, and X, require near-instant responses when unfurling link-based content. In order to guarantee sufficient responsiveness, consider rendering pages and image assets ahead of time by enabling static optimization by setting`NEXT_PUBLIC_STATICALLY_OPTIMIZE_PHOTOS = 1`and`NEXT_PUBLIC_STATICALLY_OPTIMIZE_PHOTO_OG_IMAGES = 1`. Keep in mind that this will increase platform usage.
>

> By default, all photos are shown full-width, regardless of orientation. Enable matting to showcase horizontal and vertical photos at similar scales by setting`NEXT_PUBLIC_MATTE_PHOTOS = 1`.
>

> Thumbnail grid density (seen on`/grid`, tag overviews, and other photo sets) is dependent on aspect ratio configuration (ratios of 1 or less have more photos per row). This can be overridden by setting`NEXT_PUBLIC_SHOW_LARGE_THUMBNAILS = 1`.
>

> While all hidden paths (`/tag/hidden/*`) require authentication, raw links to individual photo assets remain publicly accessible. Randomly generated urls from storage providers are only secure via obscurity. Use with caution.
>

> igate to`/admin/configuration`and click "Clear Cache."
>

> igate to`/admin/configuration`and click "Clear Cache." If this doesn't help,[open an issue](https://github.com/sambecker/exif-photo-blog/issues/new).
>

> This template relies on`sharp`to manipulate images and`next/image`to serve them, neither of which currently support HEIC ([https://github.com/vercel/next.js/discussions/30043](https://github.com/vercel/next.js/discussions/30043)+[https://github.com/lovell/sharp/issues/3981](https://github.com/lovell/sharp/issues/3981)). Fortunately, you can still upload HEIC files directly from native share controls on Apple platforms and they will automatically be converted to JPG upon upload. If you think you have a viable HEIC strategy, feel free to open a PR. See[https://github.com/sambecker/exif-photo-blog/issues/229](https://github.com/sambecker/exif-photo-blog/issues/229)for discussion.
>

> Absent configuration, the default grid aspect ratio is`1`.`NEXT_PUBLIC_GRID_ASPECT_RATIO`can be set to any number (for instance,`1.5`for 3:2 images) or ignored by setting to`0`.
>

> Fujifilm simulation data is stored in vendor-specific Makernote binaries embedded in EXIF data. Under certain circumstances an intermediary may strip out this data. For instance, there is a known issue on iOS where editing an image, e.g., cropping it, causes Makernote data loss. If simulation data appears to be missing, try importing the original file as it was stored by the camera. Additionally, if you can confirm the simulation mode, you can edit the photo and manually select it.
>

> If you don't see a recipe, first try syncing your photo from the ‚Ä¢‚Ä¢‚Ä¢ menu, or from`/admin/photos`. If the data looks incorrect, open an issue with the file in question attached in order for it to be investigated. Fujifilm file specifications have evolved over time and recipe parsing may need to be adjusted based on camera model/vintage.
>

> This can be accomplished by setting`NEXT_PUBLIC_CATEGORY_VISIBILITY`(which has a default value of`tags,cameras,lenses,recipes,films`) to`tags,cameras,lenses`.
>

> For a number of reasons, only EXIF orientations: 1, 3, 6, and 8 are supported. Orientations 2, 4, 5, and 7‚Äîwhich make use of mirroring‚Äîare not supported.
>

> Earlier versions of this template generated blur data on the client, which varied visually from browser to browser. Data is now generated consistently on the server. If you wish to update blur data for a particular photo, edit the photo in question, make no changes, and choose "Update."
>

> The default timeout for processing multiple uploads is 60 seconds (the limit for Hobby accounts). This can be extended to 5 minutes on Pro accounts by setting`maxDuration = 300`in`src/app/admin/uploads/page.tsx`.
>

> You may need to pre-purchase credits before accessing the OpenAI API. See[Issue #110](https://github.com/sambecker/exif-photo-blog/issues/110)for discussion.
>

> At this time, there are no plans to introduce support for new storage providers. While configuring a new, AWS-compatible provider (e.g., Cloudflare R2) should not be too difficult, there's nuance to consider surrounding details like IAM, CORS, and domain configuration, which can differ slightly from platform to platform. If you‚Äôd like to contribute an implementation for a new storage provider, please open a PR.
>

> At this time, an external storage provider is necessary in order to develop locally. If you have a strategy to propose which allows files to be locally uploaded and served to`next/image`in away that mirrors an external storage provider for debugging purposes, please open a PR.
>

> Possibly. See[Issue #116](https://github.com/sambecker/exif-photo-blog/issues/116)for discussion.
>

> Previous versions of this template stored Next.js "App Router" files in`/src`, and app-level functionality in`/src/site`. If you've made customizations and are having difficulty merging updates, consider moving`/src/app`files to`/`, and renaming`src/site`to`/src/app`. Other structural changes include moving`tailwind.css`and`middleware.ts`to`/`. Additionally, it may be helpful to review[PR #195](https://github.com/sambecker/exif-photo-blog/pull/195)for an overview of the most significant changes.
>

[‚Üê Back to Templates](/templates)

![Photo Blog Thumbnail](/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F39rys245Px3FVBGRJNYEON%2Fbf68d5c052bda9e9e5bec21878764bc3%2Fimage.png&w=3840&q=75)

[sambecker/exif-photo-blog](https://github.com/sambecker/exif-photo-blog)

# Photo Blog with Admin Panel

EXIF-based photo blog with built-in admin panel, Vercel Postgres as CMS, and Vercel Blob for image storage.

[Deploy](/new/clone?demo-deion=Store%20photos%20with%20original%20camera%20data&demo-image=%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F39rys245Px3FVBGRJNYEON%2Fbf68d5c052bda9e9e5bec21878764bc3%2Fimage.png&demo-title=Photo%20Blog&demo-url=https%3A%2F%2Fphotos.sambecker.com&from=templates&project-name=Photo%20Blog&repository-name=exif-photo-blog&repository-url=https%3A%2F%2Fgithub.com%2Fsambecker%2Fexif-photo-blog&skippable-integrations=1&stores=%5B%7B%22type%22%3A%22postgres%22%7D%2C%7B%22type%22%3A%22blob%22%7D%5D&teamCreateStatus=hidden)

[View Demo](https://photos.sambecker.com/)

[Next.js](/templates/next.js)

[Blog](/templates/blog)

[Authentication](/templates/authentication)

[Tailwind](/templates/tailwind)

[Vercel Postgres](/templates/vercel-postgres)

[Vercel Blob](/templates/vercel-blob)

[NextAuth.js](/templates/nextauth.js)

## üì∑  EXIF  Photo Blog

[https://github.com/sambecker/exif-photo-blog/assets/169298/4253ea54-558a-4358-8834-89943cfbafb4](https://github.com/sambecker/exif-photo-blog/assets/169298/4253ea54-558a-4358-8834-89943cfbafb4)

[](https://vercel.com/new/sambecker-pro/clone?demo-deion=Store%20photos%20with%20original%20camera%20data&demo-image=%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F39rys245Px3FVBGRJNYEON%2Fbf68d5c052bda9e9e5bec21878764bc3%2Fimage.png&demo-title=Photo%20Blog&demo-url=https%3A%2F%2Fphotos.sambecker.com&from=templates&project-name=Photo%20Blog&repository-name=exif-photo-blog&repository-url=https%3A%2F%2Fgithub.com%2Fsambecker%2Fexif-photo-blog&skippable-integrations=1&stores=%5B%7B%22type%22%3A%22postgres%22%7D%2C%7B%22type%22%3A%22blob%22%7D%5D&teamCreateStatus=hidden)

### üé¨ ¬† ¬† Demo

[https://photos.sambecker.com](https://photos.sambecker.com)

### ‚ú® ¬† ¬† Features

* Built-in auth
* Photo upload with EXIF extraction
* Organize photos by tag
* Infinite scroll
* Light/dark mode
* Automatic OG image generation
* CMD-K menu with photo search
* AI-generated text deions
* Support for Fujifilm recipes and film simulations

### üõ†Ô∏è ¬† ¬† Installation

#### 1. Deploy to Vercel

1. Click[Deploy](https://vercel.com/new/clone?demo-title=Photo+Blog&demo-deion=Store+photos+with+original+camera+data&demo-url=https%3A%2F%2Fphotos.sambecker.com&demo-image=https%3A%2F%2Fphotos.sambecker.com%2Ftemplate-image-tight&project-name=Photo+Blog&repository-name=exif-photo-blog&repository-url=https%3A%2F%2Fgithub.com%2Fsambecker%2Fexif-photo-blog&from=templates&skippable-integrations=1&teamCreateStatus=hidden&stores=%5B%7B%22type%22%3A%22postgres%22%7D%2C%7B%22type%22%3A%22blob%22%7D%5D)
1. Add required storage ([Vercel Postgres](https://vercel.com/docs/storage/vercel-postgres/quickstart#create-a-postgres-database)+[Vercel Blob](https://vercel.com/docs/storage/vercel-blob/quickstart#create-a-blob-store)) as part of template installation
1. Configure environment variable for production domain in project settings`NEXT_PUBLIC_SITE_DOMAIN`(e.g., photos.domain.com‚Äîused in absolute urls and seen in igation if no explicit  title is set)
1. `NEXT_PUBLIC_SITE_DOMAIN`(e.g., photos.domain.com‚Äîused in absolute urls and seen in igation if no explicit  title is set)

#### 2. Setup Auth

1. [Generate auth secret](https://generate-secret.vercel.app/32)and add to environment variables:`AUTH_SECRET`
1. `AUTH_SECRET`
1. Add admin user to environment variables:`ADMIN_EMAIL``ADMIN_PASSWORD`
1. `ADMIN_EMAIL`
1. `ADMIN_PASSWORD`
1. Trigger redeployVisit project on Vercel, igate to "Deployments" tab, click ‚Ä¢‚Ä¢‚Ä¢ button next to most recent deployment, and select "Redeploy"
1. Visit project on Vercel, igate to "Deployments" tab, click ‚Ä¢‚Ä¢‚Ä¢ button next to most recent deployment, and select "Redeploy"

#### 3. Upload your first photo üéâ

1. Visit`/admin`
1. Sign in with credentials supplied in Step 2
1. Click "Upload Photos"
1. Add optional title
1. Click "Create"

If you don't plan to change the code, or don't mind making your updates public, consider forking this repo to easily receive future updates. If you've already setup your project on Vercel see detailed instructions here on reconfiguring your project.

### üîÑ ¬† ¬† Receiving updates

If you don't plan to change the code, or don't mind making your updates public, consider[forking](https://github.com/sambecker/exif-photo-blog/fork)this repo to easily receive future updates. If you've already set up your project on Vercel see thesemigration instructions.

### üíª ¬† ¬† Local development

1. Clone code
1. Run`pnpm i`to install dependencies
1. If necessary, install[Vercel CLI](https://vercel.com/docs/cli#installing-vercel-cli)and authenticate by running`vercel login`
1. Run`vercel link`to connect CLI to your project
1. Run`vercel dev`to start dev server with Vercel-managed environment variables

See FAQ forlimitations of local development

### üé® ¬† ¬† Further customization

#### AI text generation

*‚ö†Ô∏è READ BEFORE PROCEEDING*

> *Usage of this feature will result in fees from OpenAI. When enabling AI text generation, follow all recommended mitigations in order to avoid unexpected charges and attacks. Make sure your OpenAI secret key environment variable is not prefixed with NEXT_PUBLIC.*
>

1. Setup OpenAIIf you don't already have one, create an[OpenAI](https://openai.com)account and fund it (see[this thread](https://github.com/sambecker/exif-photo-blog/issues/110)if you're having issues)Generate an API key and store in environment variable`OPENAI_SECRET_KEY`Setup usage limits to avoid unexpected charges (*recommended*)
1. If you don't already have one, create an[OpenAI](https://openai.com)account and fund it (see[this thread](https://github.com/sambecker/exif-photo-blog/issues/110)if you're having issues)
1. Generate an API key and store in environment variable`OPENAI_SECRET_KEY`
1. Setup usage limits to avoid unexpected charges (*recommended*)
1. Add rate limiting (*recommended*)As an additional precaution, create an Upstash Redis store from the storage tab of the Vercel dashboard and link it to your project in order to enable rate limiting‚Äîno further configuration necessary
1. As an additional precaution, create an Upstash Redis store from the storage tab of the Vercel dashboard and link it to your project in order to enable rate limiting‚Äîno further configuration necessary
1. Configure auto-generated fields (optional)Set which text fields auto-generate when uploading a photo by storing a comma-separated list, e.g.,`AI_TEXT_AUTO_GENERATED_FIELDS = title,semantic`Accepted values:`all``title`(default)`caption``tags`(default)`semantic`(default)`none`
1. Set which text fields auto-generate when uploading a photo by storing a comma-separated list, e.g.,`AI_TEXT_AUTO_GENERATED_FIELDS = title,semantic`
1. Accepted values:`all``title`(default)`caption``tags`(default)`semantic`(default)`none`
1. `all`
1. `title`(default)
1. `caption`
1. `tags`(default)
1. `semantic`(default)
1. `none`

#### Web Analytics

1. Open project on Vercel
1. Click "Analytics" tab
1. Follow "Enable Web Analytics" instructions (`@vercel/analytics`already included)

#### Speed Insights

1. Open project on Vercel
1. Click "Speed Insights" tab
1. Follow "Enable Speed Insights" instructions (`@vercel/speed-insights`already included)

#### Optional configuration

Application behavior can be changed by configuring the following environment variables:

* `NEXT_PUBLIC_META_TITLE`(seen in search results and browser tab)
* `NEXT_PUBLIC_META_DEION`(seen in search results)
* `NEXT_PUBLIC__TITLE`(defaults to domain when not configured)
* `NEXT_PUBLIC__CAPTION`(seen in igation, beneath title)
* `NEXT_PUBLIC_PAGE_ABOUT`(seen in grid ‚Äîaccepts rich formatting tags:`<b>`,`<strong>`,`<i>`,`<em>`,`<u>`,`<br>`)

> ‚ö†Ô∏è Enabling may result in increased project usage. Static optimizationtroubleshooting hintsin FAQ.
>

* `NEXT_PUBLIC_STATICALLY_OPTIMIZE_PHOTOS = 1`enables static optimization for photo pages (`p/[photoId]`), i.e., renders pages at build time
* `NEXT_PUBLIC_STATICALLY_OPTIMIZE_PHOTO_OG_IMAGES = 1`enables static optimization for OG images, i.e., renders images at build time
* `NEXT_PUBLIC_STATICALLY_OPTIMIZE_PHOTO_CATEGORIES = 1`enables static optimization for photo categories (`tag/[tag]`,`shot-on/[make]/[model]`, etc.), i.e., renders pages at build time
* `NEXT_PUBLIC_STATICALLY_OPTIMIZE_PHOTO_CATEGORY_OG_IMAGES = 1`enables static optimization for photo category (`tag/[tag]`,`shot-on/[make]/[model]`, etc.) OG images, i.e., renders images at build time
* `NEXT_PUBLIC_PRESERVE_ORIGINAL_UPLOADS = 1`prevents photo uploads being compressed before storing
* `NEXT_PUBLIC_IMAGE_QUALITY = 1-100`controls the quality of large photos
* `NEXT_PUBLIC_BLUR_DISABLED = 1`prevents image blur data being stored and displayed (potentially useful for limiting Postgres usage)

* `NEXT_PUBLIC_DEFAULT_THEME = light | dark`sets preferred initial theme (defaults to`system`when not configured)
* `NEXT_PUBLIC_MATTE_PHOTOS = 1`constrains the size of each photo, and displays a surrounding border, potentially useful for photos with tall aspect ratios (colors can be customized via`NEXT_PUBLIC_MATTE_COLOR`+`NEXT_PUBLIC_MATTE_COLOR_DARK`)

* `NEXT_PUBLIC_CATEGORY_VISIBILITY`Comma-separated value controlling which photo sets appear in grid  and CMD-K menu, and in what order. For example, you could move cameras above tags, and hide film simulations, by updating to`cameras,tags,lenses,recipes`.Accepted values:`tags`(default)`cameras`(default)`lenses`(default)`recipes`(default)`films`(default)`focal-lengths`
* Comma-separated value controlling which photo sets appear in grid  and CMD-K menu, and in what order. For example, you could move cameras above tags, and hide film simulations, by updating to`cameras,tags,lenses,recipes`.
* Accepted values:`tags`(default)`cameras`(default)`lenses`(default)`recipes`(default)`films`(default)`focal-lengths`
* `tags`(default)
* `cameras`(default)
* `lenses`(default)
* `recipes`(default)
* `films`(default)
* `focal-lengths`
* `NEXT_PUBLIC_EXHAUSTIVE__CATEGORIES = 1`always shows expanded  content
* `NEXT_PUBLIC_HIDE_EXIF_DATA = 1`hides EXIF data in photo details and OG images (potentially useful for portfolios, which don't focus on photography)
* `NEXT_PUBLIC_HIDE_ZOOM_CONTROLS = 1`hides fullscreen photo zoom controls
* `NEXT_PUBLIC_HIDE_TAKEN_AT_TIME = 1`hides taken at time from photo meta
* `NEXT_PUBLIC_HIDE_SOCIAL = 1`removes X (formerly Twitter) button from share modal
* `NEXT_PUBLIC_HIDE_REPO_LINK = 1`removes  link to repo

* `NEXT_PUBLIC_GRID_HOMEPAGE = 1`shows grid layout on homepage
* `NEXT_PUBLIC_GRID_ASPECT_RATIO = 1.5`sets aspect ratio for grid tiles (defaults to`1`‚Äîsetting to`0`removes the constraint)
* `NEXT_PUBLIC_SHOW_LARGE_THUMBNAILS = 1`ensures large thumbnails on photo grid views (if not configured, density is based on aspect ratio)

* `NEXT_PUBLIC_GEO_PRIVACY = 1`disables collection/display of location-based data (‚ö†Ô∏è re-compresses uploaded images in order to remove GPS information)
* `NEXT_PUBLIC_ALLOW_PUBLIC_DOWNLOADS = 1`enables public photo downloads for all visitors (‚ö†Ô∏è may result in increased bandwidth usage)
* `NEXT_PUBLIC_PUBLIC_API = 1`enables public API available at`/api`
* `NEXT_PUBLIC_IGNORE_PRIORITY_ORDER = 1`prevents`priority_order`field affecting photo order
* `NEXT_PUBLIC_OG_TEXT_ALIGNMENT = BOTTOM`keeps OG image text bottom aligned (default is top)

### Alternate storage providers

Only one storage adapter‚ÄîVercel Blob, Cloudflare R2, or AWS S3‚Äîcan be used at a time. Ideally, this is configured before photos are uploaded (see[Issue #34](https://github.com/sambecker/exif-photo-blog/issues/34)for migration considerations). If you have multiple adapters, you can set one as preferred by storing`aws-s3`,`cloudflare-r2`, or`vercel-blob`in`NEXT_PUBLIC_STORAGE_PREFERENCE`. SeeFAQregarding unsupported providers.

#### Cloudflare R2

1. Setup bucket[Create R2 bucket](https://developers.cloudflare.com/r2/)with default settingsSetup CORS under bucket settings:`[{"Alloweds":["*"],"AllowedMethods":["GET","PUT"],"AllowedOrigins":["http://localhost:3000","https://{VERCEL_PROJECT_NAME}*.vercel.app","{PRODUCTION_DOMAIN}"]}]`Enable public hosting by doing one of the following:Select "Connect Custom Domain" and choose a Cloudflare domainORSelect "Allow Access" from R2.dev subdomainStore public configuration:`NEXT_PUBLIC_CLOUDFLARE_R2_BUCKET`: bucket name`NEXT_PUBLIC_CLOUDFLARE_R2_ACCOUNT_ID`: account id (found on R2 overview page)`NEXT_PUBLIC_CLOUDFLARE_R2_PUBLIC_DOMAIN`: either "your-custom-domain.com" or "pub-jf90908...s0d9f8s0s9df.r2.dev"
1. [Create R2 bucket](https://developers.cloudflare.com/r2/)with default settings
1. Setup CORS under bucket settings:
1. Enable public hosting by doing one of the following:Select "Connect Custom Domain" and choose a Cloudflare domainORSelect "Allow Access" from R2.dev subdomain
1. Select "Connect Custom Domain" and choose a Cloudflare domain
1. OR
1. Select "Allow Access" from R2.dev subdomain
1. Store public configuration:`NEXT_PUBLIC_CLOUDFLARE_R2_BUCKET`: bucket name`NEXT_PUBLIC_CLOUDFLARE_R2_ACCOUNT_ID`: account id (found on R2 overview page)`NEXT_PUBLIC_CLOUDFLARE_R2_PUBLIC_DOMAIN`: either "your-custom-domain.com" or "pub-jf90908...s0d9f8s0s9df.r2.dev"
1. `NEXT_PUBLIC_CLOUDFLARE_R2_BUCKET`: bucket name
1. `NEXT_PUBLIC_CLOUDFLARE_R2_ACCOUNT_ID`: account id (found on R2 overview page)
1. `NEXT_PUBLIC_CLOUDFLARE_R2_PUBLIC_DOMAIN`: either "your-custom-domain.com" or "pub-jf90908...s0d9f8s0s9df.r2.dev"
1. Setup private credentialsCreate API token by selecting "Manage R2 API Tokens," and clicking "Create API Token"Select "Object Read & Write," choose "Apply to specific buckets only," and select the bucket created in Step 1Store credentials (‚ö†Ô∏è*Ensure access keys are not prefixed with`NEXT_PUBLIC`*):`CLOUDFLARE_R2_ACCESS_KEY``CLOUDFLARE_R2_SECRET_ACCESS_KEY`
1. Create API token by selecting "Manage R2 API Tokens," and clicking "Create API Token"
1. Select "Object Read & Write," choose "Apply to specific buckets only," and select the bucket created in Step 1
1. Store credentials (‚ö†Ô∏è*Ensure access keys are not prefixed with`NEXT_PUBLIC`*):`CLOUDFLARE_R2_ACCESS_KEY``CLOUDFLARE_R2_SECRET_ACCESS_KEY`
1. `CLOUDFLARE_R2_ACCESS_KEY`
1. `CLOUDFLARE_R2_SECRET_ACCESS_KEY`

#### AWS S3

1. Setup bucket[Create S3 bucket](https://s3.console.aws.amazon.com/s3)with "ACLs enabled," and "Block all public access" turned offSetup CORS under bucket permissions:`[{"Alloweds":["*"],"AllowedMethods":["GET","PUT"],"AllowedOrigins":["http://localhost:*","https://{VERCEL_PROJECT_NAME}*.vercel.app","{PRODUCTION_DOMAIN}"],"Exposes":[]}]`Store public configuration`NEXT_PUBLIC_AWS_S3_BUCKET`: bucket name`NEXT_PUBLIC_AWS_S3_REGION`: bucket region, e.g., "us-east-1"
1. [Create S3 bucket](https://s3.console.aws.amazon.com/s3)with "ACLs enabled," and "Block all public access" turned off
1. Setup CORS under bucket permissions:`[{"Alloweds":["*"],"AllowedMethods":["GET","PUT"],"AllowedOrigins":["http://localhost:*","https://{VERCEL_PROJECT_NAME}*.vercel.app","{PRODUCTION_DOMAIN}"],"Exposes":[]}]`
1. Store public configuration`NEXT_PUBLIC_AWS_S3_BUCKET`: bucket name`NEXT_PUBLIC_AWS_S3_REGION`: bucket region, e.g., "us-east-1"
1. `NEXT_PUBLIC_AWS_S3_BUCKET`: bucket name
1. `NEXT_PUBLIC_AWS_S3_REGION`: bucket region, e.g., "us-east-1"
1. Setup private credentials[Create IAM policy](https://console.aws.amazon.com/iam/home#/policies)using JSON editor:`{"Version":"2012-10-17","Statement":[{"Effect":"Allow","Action":["s3:PutObject","s3:PutObjectACL","s3:GetObject","s3:ListBucket","s3:DeleteObject"],"Resource":["arn:aws:s3:::{BUCKET_NAME}","arn:aws:s3:::{BUCKET_NAME}/*"]}]}`[Create IAM user](https://console.aws.amazon.com/iam/home#/users)by choosing "Attach policies directly," and selecting the policy created above. Create "Access key" under "Security credentials," choose "Application running outside AWS," and store credentials (‚ö†Ô∏è*Ensure access keys are not prefixed with`NEXT_PUBLIC`*):`AWS_S3_ACCESS_KEY``AWS_S3_SECRET_ACCESS_KEY`
1. [Create IAM policy](https://console.aws.amazon.com/iam/home#/policies)using JSON editor:`{"Version":"2012-10-17","Statement":[{"Effect":"Allow","Action":["s3:PutObject","s3:PutObjectACL","s3:GetObject","s3:ListBucket","s3:DeleteObject"],"Resource":["arn:aws:s3:::{BUCKET_NAME}","arn:aws:s3:::{BUCKET_NAME}/*"]}]}`
1. [Create IAM user](https://console.aws.amazon.com/iam/home#/users)by choosing "Attach policies directly," and selecting the policy created above. Create "Access key" under "Security credentials," choose "Application running outside AWS," and store credentials (‚ö†Ô∏è*Ensure access keys are not prefixed with`NEXT_PUBLIC`*):`AWS_S3_ACCESS_KEY``AWS_S3_SECRET_ACCESS_KEY`
1. `AWS_S3_ACCESS_KEY`
1. `AWS_S3_SECRET_ACCESS_KEY`

### Alternate database providers (experimental)

Vercel Postgres can be switched to another Postgres-compatible, pooling provider by updating`POSTGRES_URL`. Some providers only work when SSL is disabled, which can configured by setting`DISABLE_POSTGRES_SSL = 1`.

#### Supabase

1. Ensure connection string is set to "Transaction Mode" via port`6543`
1. Disable SSL by setting`DISABLE_POSTGRES_SSL = 1`

### üìñ ¬† ¬† FAQ

> For forked repos, click "Code," then "Update branch" from the main repo page. If you originally cloned the code, you can[create a fork](https://github.com/sambecker/exif-photo-blog/fork)from GitHub, then update your Git connection from your Vercel project settings. Once you've done this, you may need to go to your project deployments page, click ‚Ä¢‚Ä¢‚Ä¢, select "Create deployment," and choose`main`.
>

> On desktop, select ‚Ä¢‚Ä¢‚Ä¢ menu in the top right next to site title and choose, "Select Multiple." On mobile, "Select Multiple Photos" can be accessed from the search menu. From there, you can perform bulk tag, favorite, and delete actions.
>

> This template statically optimizes core views such as`/`and`/grid`to minimize visitor load times. Consequently, when photos are added, edited, or removed, it might take several minutes for those changes to propagate. If it seems like a change is not taking effect, try igating to`/admin/configuration`and clicking "Clear Cache."
>

> There have been reports ([Issue 184](https://github.com/sambecker/exif-photo-blog/issues/184#issuecomment-2629474045)+[185](https://github.com/sambecker/exif-photo-blog/issues/185#issuecomment-2629478570)) that having large photos (over 30MB), or a CDN, e.g., Cloudflare in front of Vercel, may destabilize static optimization.
>

> As the template has evolved, EXIF fields (such as lenses) have been added, blur data is generated through a different method, and AI/privacy features have been added. In order to bring older photos up to date, either click the 'sync' button next to a photo or use the outdated photo page (`/admin/outdated`) to make batch updates.
>

> Many services such as iMessage, Slack, and X, require near-instant responses when unfurling link-based content. In order to guarantee sufficient responsiveness, consider rendering pages and image assets ahead of time by enabling static optimization by setting`NEXT_PUBLIC_STATICALLY_OPTIMIZE_PHOTOS = 1`and`NEXT_PUBLIC_STATICALLY_OPTIMIZE_PHOTO_OG_IMAGES = 1`. Keep in mind that this will increase platform usage.
>

> By default, all photos are shown full-width, regardless of orientation. Enable matting to showcase horizontal and vertical photos at similar scales by setting`NEXT_PUBLIC_MATTE_PHOTOS = 1`.
>

> Thumbnail grid density (seen on`/grid`, tag overviews, and other photo sets) is dependent on aspect ratio configuration (ratios of 1 or less have more photos per row). This can be overridden by setting`NEXT_PUBLIC_SHOW_LARGE_THUMBNAILS = 1`.
>

> While all hidden paths (`/tag/hidden/*`) require authentication, raw links to individual photo assets remain publicly accessible. Randomly generated urls from storage providers are only secure via obscurity. Use with caution.
>

> igate to`/admin/configuration`and click "Clear Cache."
>

> igate to`/admin/configuration`and click "Clear Cache." If this doesn't help,[open an issue](https://github.com/sambecker/exif-photo-blog/issues/new).
>

> This template relies on`sharp`to manipulate images and`next/image`to serve them, neither of which currently support HEIC ([https://github.com/vercel/next.js/discussions/30043](https://github.com/vercel/next.js/discussions/30043)+[https://github.com/lovell/sharp/issues/3981](https://github.com/lovell/sharp/issues/3981)). Fortunately, you can still upload HEIC files directly from native share controls on Apple platforms and they will automatically be converted to JPG upon upload. If you think you have a viable HEIC strategy, feel free to open a PR. See[https://github.com/sambecker/exif-photo-blog/issues/229](https://github.com/sambecker/exif-photo-blog/issues/229)for discussion.
>

> Absent configuration, the default grid aspect ratio is`1`.`NEXT_PUBLIC_GRID_ASPECT_RATIO`can be set to any number (for instance,`1.5`for 3:2 images) or ignored by setting to`0`.
>

> Fujifilm simulation data is stored in vendor-specific Makernote binaries embedded in EXIF data. Under certain circumstances an intermediary may strip out this data. For instance, there is a known issue on iOS where editing an image, e.g., cropping it, causes Makernote data loss. If simulation data appears to be missing, try importing the original file as it was stored by the camera. Additionally, if you can confirm the simulation mode, you can edit the photo and manually select it.
>

> If you don't see a recipe, first try syncing your photo from the ‚Ä¢‚Ä¢‚Ä¢ menu, or from`/admin/photos`. If the data looks incorrect, open an issue with the file in question attached in order for it to be investigated. Fujifilm file specifications have evolved over time and recipe parsing may need to be adjusted based on camera model/vintage.
>

> This can be accomplished by setting`NEXT_PUBLIC_CATEGORY_VISIBILITY`(which has a default value of`tags,cameras,lenses,recipes,films`) to`tags,cameras,lenses`.
>

> For a number of reasons, only EXIF orientations: 1, 3, 6, and 8 are supported. Orientations 2, 4, 5, and 7‚Äîwhich make use of mirroring‚Äîare not supported.
>

> Earlier versions of this template generated blur data on the client, which varied visually from browser to browser. Data is now generated consistently on the server. If you wish to update blur data for a particular photo, edit the photo in question, make no changes, and choose "Update."
>

> The default timeout for processing multiple uploads is 60 seconds (the limit for Hobby accounts). This can be extended to 5 minutes on Pro accounts by setting`maxDuration = 300`in`src/app/admin/uploads/page.tsx`.
>

> You may need to pre-purchase credits before accessing the OpenAI API. See[Issue #110](https://github.com/sambecker/exif-photo-blog/issues/110)for discussion.
>

> At this time, there are no plans to introduce support for new storage providers. While configuring a new, AWS-compatible provider (e.g., Cloudflare R2) should not be too difficult, there's nuance to consider surrounding details like IAM, CORS, and domain configuration, which can differ slightly from platform to platform. If you‚Äôd like to contribute an implementation for a new storage provider, please open a PR.
>

> At this time, an external storage provider is necessary in order to develop locally. If you have a strategy to propose which allows files to be locally uploaded and served to`next/image`in away that mirrors an external storage provider for debugging purposes, please open a PR.
>

> Possibly. See[Issue #116](https://github.com/sambecker/exif-photo-blog/issues/116)for discussion.
>

> Previous versions of this template stored Next.js "App Router" files in`/src`, and app-level functionality in`/src/site`. If you've made customizations and are having difficulty merging updates, consider moving`/src/app`files to`/`, and renaming`src/site`to`/src/app`. Other structural changes include moving`tailwind.css`and`middleware.ts`to`/`. Additionally, it may be helpful to review[PR #195](https://github.com/sambecker/exif-photo-blog/pull/195)for an overview of the most significant changes.
>

## Related Templates

[Image Gallery StarterAn image gallery built on Next.js and Cloudinary.by‚ñ≤ Vercel](/templates/next.js/image-gallery-starter)

[AI Photo RestorerAn AI Face Photo Restorer built on Next.js and Replicate.byHassan El Mghari](/templates/next.js/ai-photo-restorer)

[OG.cool ‚Äì Display headlines in OG imagesA Next.js app that displays headlines directly inside a dynamically generated image. Powered by @vercel/og.bySteven Tey](/templates/next.js/og-cool)

[Vercel Blob Next.js StarterSimple Next.js template that uses Vercel Blob for image uploadsby‚ñ≤ Vercel](/templates/next.js/blob-starter)

## Unleash New Possibilities

Deploy your app on Vercel and unlock its full potential

## Products

* [AI](/ai)
* [Enterprise](/enterprise)
* [Fluid Compute](/fluid)
* [Next.js](/solutions/nextjs)
* [Observability](/products/observability)
* [Previews](/products/previews)
* [Rendering](/products/rendering)
* [Security](/security)
* [Turbo](/solutions/turborepo)
* [v0](https://v0.dev/)

## Resources

* [Community](https://community.vercel.com/)
* [Docs](/docs)
* [Guides](/guides)
* [Help](/help)
* [Integrations](/integrations)
* [Pricing](/pricing)
* [Resources](/resources)
* [Solution Partners](/partners/solution-partners)
* [Templates](/templates)

## Company

* [About](/about)
* [Blog](/blog)
* [Careers](/careers)
* [Changelog](/changelog)
* [Contact Us](/contact)
* [Customers](/customers)
* [Partners](/partners)
* [Privacy Policy](/legal/privacy-policy)
* Legal

## Social

* [GitHub](https://github.com/vercel)
* [LinkedIn](https://linkedin.com/company/vercel)
* [Twitter](https://x.com/vercel)
* [YouTube](https://youtube.com/@VercelHQ)

[Loading status‚Ä¶](https://vercel-status.com)