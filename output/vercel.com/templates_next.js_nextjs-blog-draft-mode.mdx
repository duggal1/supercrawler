---
title: Next.js Blog with Draft Mode
description: No description
keywords: No keywords
canonicalUrl: https://vercel.com/templates/next.js/nextjs-blog-draft-mode
---

## Table of Contents

{/* Auto-generated table of contents */}

[Skip to content](#geist-skip-)

* ProductsDX Platform[Previews Helping teams ship 6× faster](/products/previews)[AI Powering breakthroughs](/ai)Managed Infrastructure[Fluid compute Servers, in serverless form](/fluid)[Rendering Fast, scalable, and reliable](/products/rendering)[Observability Trace every step](/products/observability)[Security Scale without compromising](/security)Open Source[Next.js The native Next.js platform](/frameworks/nextjs)[Turborepo Speed with Enterprise scale](/solutions/turborepo)[AI SDK The AI Toolkit for Type](https://sdk.vercel.ai/)
* DX Platform[Previews Helping teams ship 6× faster](/products/previews)[AI Powering breakthroughs](/ai)
* [Previews Helping teams ship 6× faster](/products/previews)
* [AI Powering breakthroughs](/ai)
* Managed Infrastructure[Fluid compute Servers, in serverless form](/fluid)[Rendering Fast, scalable, and reliable](/products/rendering)[Observability Trace every step](/products/observability)[Security Scale without compromising](/security)
* [Fluid compute Servers, in serverless form](/fluid)
* [Rendering Fast, scalable, and reliable](/products/rendering)
* [Observability Trace every step](/products/observability)
* [Security Scale without compromising](/security)
* Open Source[Next.js The native Next.js platform](/frameworks/nextjs)[Turborepo Speed with Enterprise scale](/solutions/turborepo)[AI SDK The AI Toolkit for Type](https://sdk.vercel.ai/)
* [Next.js The native Next.js platform](/frameworks/nextjs)
* [Turborepo Speed with Enterprise scale](/solutions/turborepo)
* [AI SDK The AI Toolkit for Type](https://sdk.vercel.ai/)
* SolutionsUse Cases[AI Apps Deploy at the speed of AI](/solutions/ai-apps)[Composable Commerce Power storefronts that convert](/solutions/composable-commerce)[Marketing Sites Launch campaigns fast](/solutions/marketing-sites)[Multi-tenant Platforms Scale apps with one codebase](/solutions/multi-tenant-saas)[Web Apps Ship features, not infrastructure](/solutions/web-apps)Users[Platform Engineers Automate away repetition](/solutions/platform-engineering)[Design Engineers Deploy for every idea](/solutions/design-engineering)
* Use Cases[AI Apps Deploy at the speed of AI](/solutions/ai-apps)[Composable Commerce Power storefronts that convert](/solutions/composable-commerce)[Marketing Sites Launch campaigns fast](/solutions/marketing-sites)[Multi-tenant Platforms Scale apps with one codebase](/solutions/multi-tenant-saas)[Web Apps Ship features, not infrastructure](/solutions/web-apps)
* [AI Apps Deploy at the speed of AI](/solutions/ai-apps)
* [Composable Commerce Power storefronts that convert](/solutions/composable-commerce)
* [Marketing Sites Launch campaigns fast](/solutions/marketing-sites)
* [Multi-tenant Platforms Scale apps with one codebase](/solutions/multi-tenant-saas)
* [Web Apps Ship features, not infrastructure](/solutions/web-apps)
* Users[Platform Engineers Automate away repetition](/solutions/platform-engineering)[Design Engineers Deploy for every idea](/solutions/design-engineering)
* [Platform Engineers Automate away repetition](/solutions/platform-engineering)
* [Design Engineers Deploy for every idea](/solutions/design-engineering)
* ResourcesTools[Resource Center Today’s best practices](/resources)[Marketplace Extend and automate workflows](/marketplace)[Templates Jumpstart app development](/templates)[Guides Find help quickly](/guides)[Partner Finder Get help from solution partners](/partners/solution-partners)Company[Customers Trusted by the best teams](/customers)[Blog The latest posts and changes](/blog)[Changelog See what shipped](/changelog)[Press Read the latest news](/press)
* Tools[Resource Center Today’s best practices](/resources)[Marketplace Extend and automate workflows](/marketplace)[Templates Jumpstart app development](/templates)[Guides Find help quickly](/guides)[Partner Finder Get help from solution partners](/partners/solution-partners)
* [Resource Center Today’s best practices](/resources)
* [Marketplace Extend and automate workflows](/marketplace)
* [Templates Jumpstart app development](/templates)
* [Guides Find help quickly](/guides)
* [Partner Finder Get help from solution partners](/partners/solution-partners)
* Company[Customers Trusted by the best teams](/customers)[Blog The latest posts and changes](/blog)[Changelog See what shipped](/changelog)[Press Read the latest news](/press)
* [Customers Trusted by the best teams](/customers)
* [Blog The latest posts and changes](/blog)
* [Changelog See what shipped](/changelog)
* [Press Read the latest news](/press)
* [Enterprise](/enterprise)
* [Docs](/docs)
* [Pricing](/pricing)

[Log In](/login)

[Contact](/contact)

[Sign Up](/signup)

[← Back to Templates](/templates)

[vercel/next.js](https://github.com/vercel/next.js/tree/canary/examples/cms-contentful)

# Next.js Blog with Draft Mode

Static blog with Preview Mode, built with Next.js and Contentful.

[Deploy](/new/clone?demo-deion=Static%20blog%20with%20Preview%20Mode%2C%20built%20with%20Next.js%20and%20Contentful.&demo-image=%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F5nCnKpHjzhYfrEZZFcmGxU%2F9a057ee2eba16efb26ddb59ca16d4bac%2FCleanShot_2021-07-07_at_19.43.15_2x.png&demo-title=Next.js%20Blog%20with%20Draft%20Mode&demo-url=https%3A%2F%2Fnext-blog-contentful.vercel.app%2F&from=templates&integration-ids=oac_aZtAZpDfT1lX3zrnWy7KT9VA&project-name=Next.js%20Blog%20with%20Draft%20Mode&repository-name=nextjs-blog-draft-mode&repository-url=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Ftree%2Fcanary%2Fexamples%2Fcms-contentful)

[View Demo](https://next-blog-contentful.vercel.app/)

[Next.js](/templates/next.js)

[Blog](/templates/blog)

[CMS](/templates/cms)

[Tailwind](/templates/tailwind)

[Contentful](/templates/contentful)

![Next.js Blog with Preview Mode](/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F5nCnKpHjzhYfrEZZFcmGxU%2F9a057ee2eba16efb26ddb59ca16d4bac%2FCleanShot_2021-07-07_at_19.43.15_2x.png&w=3840&q=75)

## A statically generated blog example using Next.js and Contentful

This example showcases Next.js's[Static Generation](https://nextjs.org/docs/basic-features/pages)feature using[Contentful](https://www.contentful.com/)as the data source.

### Demo

#### https://app-router-contentful.vercel.app/

### Deploy your own

Using the Deploy Button below, you'll deploy the Next.js project as well as connect it to your Contentful space using the Vercel Contentful Integration.

[](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Ftree%2Fcanary%2Fexamples%2Fcms-contentful&project-name=nextjs-contentful-blog&repository-name=nextjs-contentful-blog&demo-title=Next.js+Blog&demo-deion=Static+blog+with+multiple+authors+using+Draft+Mode&demo-url=https%3A%2F%2Fnext-blog-contentful.vercel.app%2F&demo-image=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fv1625705016%2Ffront%2Fexamples%2FCleanShot_2021-07-07_at_19.43.15_2x.png&integration-ids=oac_aZtAZpDfT1lX3zrnWy7KT9VA&env=CONTENTFUL_PREVIEW_SECRET&envDeion=Any%20URL%20friendly%20value%20to%20secure%20Draft%20Mode)

#### Related examples

* [AgilityCMS](https://github.com/vercel/next.js/tree/canary/)
* [Builder.io](https://github.com/vercel/next.js/tree/canary/)
* [ButterCMS](https://github.com/vercel/next.js/tree/canary/)
* [Contentful](https://github.com/vercel/next.js/tree/canary/)
* [Cosmic](https://github.com/vercel/next.js/tree/canary/)
* [DatoCMS](https://github.com/vercel/next.js/tree/canary/)
* [DotCMS](https://github.com/vercel/next.js/tree/canary/)
* [Drupal](https://github.com/vercel/next.js/tree/canary/)
* [Enterspeed](https://github.com/vercel/next.js/tree/canary/)
* [Ghost](https://github.com/vercel/next.js/tree/canary/)
* [GraphCMS](https://github.com/vercel/next.js/tree/canary/)
* [Kontent.ai](https://github.com/vercel/next.js/tree/canary/)
* [MakeSwift](https://github.com/vercel/next.js/tree/canary/)
* [Payload](https://github.com/vercel/next.js/tree/canary/)
* [Plasmic](https://github.com/vercel/next.js/tree/canary/)
* [Prepr](https://github.com/vercel/next.js/tree/canary/)
* [Prismic](https://github.com/vercel/next.js/tree/canary/)
* [Sanity](https://github.com/vercel/next.js/tree/canary/)
* [Sitecore XM Cloud](https://github.com/vercel/next.js/tree/canary/)
* [Sitefinity](https://github.com/vercel/next.js/tree/canary/)
* [Storyblok](https://github.com/vercel/next.js/tree/canary/)
* [TakeShape](https://github.com/vercel/next.js/tree/canary/)
* [Tina](https://github.com/vercel/next.js/tree/canary/)
* [Umbraco](https://github.com/vercel/next.js/tree/canary/)
* [Umbraco heartcore](https://github.com/vercel/next.js/tree/canary/)
* [Webiny](https://github.com/vercel/next.js/tree/canary/)
* [WordPress](https://github.com/vercel/next.js/tree/canary/)
* [Blog Starter](https://github.com/vercel/next.js/tree/canary/)

### How to use

Execute[create-next-app](https://github.com/vercel/next.js/tree/canary/packages/create-next-app)with[npm](https://docs.npmjs.com/cli/init),[Yarn](https://yarnpkg.com/lang/en/docs/cli/create/), or[pnpm](https://pnpm.io)to bootstrap the example:

```
npx create
-
next
-
app
--
example cms
-
contentful cms
-
contentful
-
app
```

```
yarn create next
-
app
--
example cms
-
contentful cms
-
contentful
-
app
```

```
pnpm create next
-
app
--
example cms
-
contentful cms
-
contentful
-
app
```

### Configuration

#### Step 1. Create an account and a space on Contentful

First,[create an account on Contentful](https://www.contentful.com/sign-up/).

After creating an account, create a new empty**space**from the[dashboard](https://app.contentful.com/)and assign to it any name of your liking.

#### Step 2. Create a content model

The[content model](https://www.contentful.com/developers/docs/concepts/data-model/)defines the data structures of your application/websites. The structures are flexible and you can tailor them to your needs.

For this example you need to create a content model that defines an author and a post content type.**You can create these two by running a  or by doing it manually**to familiarize yourself with the Contentful user interface.

This project includes a setup  which you can use to set up the content model expected by the source code.

In your Contentful dashboard go to**Settings > General Settings**and copy the**Space ID**.

Next, go to**Settings > CMA tokens**and create a new token by clicking**Create personal access token**. This token has the same access rights as the logged in user.**Do not share it publicly**, you will only use it to set up your space and can delete it afterwards.

With the space ID and management access token at hand run the following command:

```
npx cross
-
env
CONTENTFUL_SPACE_ID
=
YOUR_SPACE_ID

CONTENTFUL_MANAGEMENT_TOKEN
=
XXX
 npm run setup
```

This command will create the needed content structures and set up your Contentful space ready to use. The output should look as follows:

```jsx
>
 cms
-
contentful@
1.0
.0
 setup
/
Users
/
stefan
.
judis
/
Projects
/
next
.
js
/
examples
/
cms
-
contentful
>
 node
.
/
contentful
/
setup
.
js
 $
CONTENTFUL_SPACE_ID
 $
CONTENTFUL_MANAGEMENT_TOKEN


┌──────────────────────────────────────────────────┐
│
The
 following entities are going to be imported
:
 │
├─────────────────────────────────┬────────────────┤
│
Content

Types
                   │
2
              │
├─────────────────────────────────┼────────────────┤
│
Editor

Interfaces
               │
2
              │
├─────────────────────────────────┼────────────────┤
│
Locales
                         │
1
              │
├─────────────────────────────────┼────────────────┤
│
Webhooks
                        │
0
              │
├─────────────────────────────────┼────────────────┤
│
Entries
                         │
0
              │
├─────────────────────────────────┼────────────────┤
│
Assets
                          │
0
              │
└─────────────────────────────────┴────────────────┘
 ✔
Validating
 content
-
file
 ✔
Initialize

client

(
1
s
)
 ✔
Checking

if
 destination space already has any content and retrieving
it

(
2
s
)
 ✔
Apply
 transformations to source
data

(
1
s
)
 ✔
Push
 content to destination space
   ✔
Connecting
 to
space

(
1
s
)

...

...

...
```

From your contentful space, go to**Content model**and add a new content type:

* Give it the**Name**`Author`, the**Api Identifier**should be`author`

Once the content model is saved, add these fields (you don't have to modify the settings unless specified):

* `name`-**Text**field (type**short text**).**Field ID**should be set to`name`
* `picture`-**Media**field (type**one file**).**Field ID**should be set to`picture`

Save the content type and continue.

From your contentful space, go to**Content model**and add another content type:

* Give it the**Name**`Post`, the**Api Identifier**should be`post`

Next, add these fields (you don't have to modify the settings unless specified):

* `title`-**Text**field (type**short text**)
* `content`-**Rich text**field
* `excerpt`-**Text**field (type**Long text, full-text search**)
* `coverImage`-**Media**field (type**one file**)
* `date`-**Date and time**field
* `slug`-**Text**field. You can optionally go to the settings of this field, and under**Appearance**, select**Slug**to display it as a slug of the`title`field.
* `author`-**Reference**field (type**one reference**)

Save the content type and continue.

#### Step 3. Validate your content model

After setting up the content model (either manually or by running`npm run setup`or`yarn setup`), it should look as follows.

**Content model overview**

#### Step 4. Populate Content

Go to the**Content**section in your space, then click on**Add entry**and select the**Author**content type:

* You just need**1 author entry**.
* Use dummy data for the text.
* For the image, you can download one from[Unsplash](https://unsplash.com/).

Next, create another entry with the content type**Post**:

* We recommend creating at least**2 post entries**.
* Use dummy data for the text.
* For images, you can download them from[Unsplash](https://unsplash.com/).
* Pick the**author**you created earlier.

**Important:**For each entry and asset, you need to click on**Publish**. If not, the entry will be in draft state.

#### Step 5. Set up environment variables

From your contentful space, go to**Settings > API keys**. There will be an example Content delivery / preview token - you can use these API keys. (You may also create a new key.)

Next, copy the`.env.local.example`file in this directory to`.env.local`(which will be ignored by Git):

```
cp
.
env
.
local
.
example

.
env
.
local
```

Then set each variable on`.env.local`:

* `CONTENTFUL_SPACE_ID`should be the**Space ID**field of your API Key
* `CONTENTFUL_ACCESS_TOKEN`should be the**[Content Delivery API](https://www.contentful.com/developers/docs/references/content-delivery-api/)- access token**field of your API key
* `CONTENTFUL_PREVIEW_ACCESS_TOKEN`should be the**[Content Preview API](https://www.contentful.com/developers/docs/references/content-preview-api/)- access token**field of your API key
* `CONTENTFUL_PREVIEW_SECRET`should be any value you want. It must be URL friendly as the dashboard will send it as a query parameter to enable Next.js Draft Mode
* `CONTENTFUL_REVALIDATE_SECRET`should be any value you want. This will be the value you pass in as a secret  from the Contentful Webhook settings to use**[On-Demand Revalidation](https://vercel.com/docs/concepts/next.js/incremental-static-regeneration#on-demand-revalidation)**
* `CONTENTFUL_REVALIDATE_SECRET`should be any value you want. This will be the value you pass in as a secret  from the Contentful Webhook settings to use**[On-Demand Revalidation](https://vercel.com/docs/concepts/next.js/incremental-static-regeneration#on-demand-revalidation)**

Your`.env.local`file should look like this:

```
CONTENTFUL_SPACE_ID
=
...
CONTENTFUL_ACCESS_TOKEN
=
...
CONTENTFUL_PREVIEW_ACCESS_TOKEN
=
...
CONTENTFUL_PREVIEW_SECRET
=
...
CONTENTFUL_REVALIDATE_SECRET
=
...
```

#### Step 6. Run Next.js in development mode

```
npm install
npm run dev


# or


yarn install
yarn dev
```

Your blog should be up and running on[http://localhost:3000](http://localhost:3000)! If it doesn't work, post on[GitHub discussions](https://github.com/vercel/next.js/discussions).

#### Step 7. Try Draft Mode

In your Contentful space, go to**Settings > Content preview**and add a new content preview for development.

The**Name**field may be anything, like`Development`. Then, under**Content preview URLs**, check**Post**and set its value to:

```
http
:
/
/
localhost
:
3000
/
api
/
draft
?
secret
=
<
CONTENTFUL_PREVIEW_SECRET
>
&
slug
=
{
entry
.
fields
.
slug
}
```

Replace`<CONTENTFUL_PREVIEW_SECRET>`with its respective value in`.env.local`.

Once saved, go to one of the posts you've created and:

* **Update the title**. For example, you can add`[Draft]`in front of the title.
* The state of the post will switch to**CHANGED**automatically.**Do not**publish it. By doing this, the post will be in draft state.
* In the , you will see the**Open preview**button. Click on it!

You will now be able to see the updated title. To manually exit Draft Mode, you can igate to`/api/disable-draft`in the browser.

#### Step 8. Deploy on Vercel

You can deploy this app to the cloud with[Vercel](https://vercel.com?utm_source=github&utm_medium=readme&utm_campaign=next-example)([Documentation](https://nextjs.org/docs/deployment)).

To deploy your local project to Vercel, push it to GitHub/GitLab/Bitbucket and[import to Vercel](https://vercel.com/new?utm_source=github&utm_medium=readme&utm_campaign=next-example).

**Important**: When you import your project on Vercel, make sure to click on**Environment Variables**and set them to match your`.env.local`file.

Alternatively, you can deploy using our template by clicking on the Deploy button below.

This will deploy the Next.js project as well as connect it to your Contentful space using the Vercel Contentful Integration. If you are using Draft Mode, make sure to add`CONTENTFUL_PREVIEW_SECRET`as an[Environment Variable](https://vercel.com/docs/concepts/projects/environment-variables)as well.

[](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Ftree%2Fcanary%2Fexamples%2Fcms-contentful&project-name=nextjs-contentful-blog&repository-name=nextjs-contentful-blog&demo-title=Next.js+Blog&demo-deion=Static+blog+with+multiple+authors+using+Draft+Mode&demo-url=https%3A%2F%2Fnext-blog-contentful.vercel.app%2F&demo-image=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fv1625705016%2Ffront%2Fexamples%2FCleanShot_2021-07-07_at_19.43.15_2x.png&integration-ids=oac_aZtAZpDfT1lX3zrnWy7KT9VA&env=CONTENTFUL_PREVIEW_SECRET,CONTENTFUL_REVALIDATE_SECRET&envDeion=Any%20URL%20friendly%20value%20to%20secure%20Your%20App)

#### Step 9. Try using On-Demand Revalidation

In your Contentful space, go to**Settings > Webhooks**and add a new webhook:

* **Give the webhook a name**
* **Activate:**Check the activate checkbox to ensure the webhook is marked as active
* **Specify the POST URL:**Using the URL from your Vercel deployment in step 8, add the path`/api/revalidate`at the end, so it would look something like:`https://<YOUR_VERCEL_DEPLOYMENT_URL>/api/revalidate`Replace`<YOUR_VERCEL_DEPLOYMENT_URL>`with your own deployment URL as noted in the Vercel dashboard.
* **Specify Triggers:**You can choose to trigger for all events or specific events only, such as the Publishing and Unpublishing of Entries and Assets, as shown below.
* **Specify Secret :**Add a secret  named`x-vercel-reval-key`and enter the value of the`CONTENTFUL_REVALIDATE_SECRET`from before.
* **Set Content type:**Set content type to`application/json`in the dropdown.
* **Edit post:**Now, try editing the title of one of your blog posts in Contentful and click Publish. You should see the changed reflected in the website you just deployed, all without triggering a build! Behind the scenes a call was made to the revalidate api that triggers a revalidation of both the landing page and the specific post that was changed.
* **Verify:**You can verify if your request was made successfully by checking the webhook request log on Contentful and checking for a successful 200 status code, or by having your functions tab open on Vercel when committing the change (log drains may also be used). If you are experiencing issues with the api call, ensure you have correctly entered in the value for environment variable`CONTENTFUL_REVALIDATE_SECRET`within your Vercel deployment.

[← Back to Templates](/templates)

![Next.js Blog with Preview Mode](/_next/image?url=https%3A%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F5nCnKpHjzhYfrEZZFcmGxU%2F9a057ee2eba16efb26ddb59ca16d4bac%2FCleanShot_2021-07-07_at_19.43.15_2x.png&w=3840&q=75)

[vercel/next.js](https://github.com/vercel/next.js/tree/canary/examples/cms-contentful)

# Next.js Blog with Draft Mode

Static blog with Preview Mode, built with Next.js and Contentful.

[Deploy](/new/clone?demo-deion=Static%20blog%20with%20Preview%20Mode%2C%20built%20with%20Next.js%20and%20Contentful.&demo-image=%2F%2Fimages.ctfassets.net%2Fe5382hct74si%2F5nCnKpHjzhYfrEZZFcmGxU%2F9a057ee2eba16efb26ddb59ca16d4bac%2FCleanShot_2021-07-07_at_19.43.15_2x.png&demo-title=Next.js%20Blog%20with%20Draft%20Mode&demo-url=https%3A%2F%2Fnext-blog-contentful.vercel.app%2F&from=templates&integration-ids=oac_aZtAZpDfT1lX3zrnWy7KT9VA&project-name=Next.js%20Blog%20with%20Draft%20Mode&repository-name=nextjs-blog-draft-mode&repository-url=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Ftree%2Fcanary%2Fexamples%2Fcms-contentful)

[View Demo](https://next-blog-contentful.vercel.app/)

[Next.js](/templates/next.js)

[Blog](/templates/blog)

[CMS](/templates/cms)

[Tailwind](/templates/tailwind)

[Contentful](/templates/contentful)

## A statically generated blog example using Next.js and Contentful

This example showcases Next.js's[Static Generation](https://nextjs.org/docs/basic-features/pages)feature using[Contentful](https://www.contentful.com/)as the data source.

### Demo

#### https://app-router-contentful.vercel.app/

### Deploy your own

Using the Deploy Button below, you'll deploy the Next.js project as well as connect it to your Contentful space using the Vercel Contentful Integration.

[](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Ftree%2Fcanary%2Fexamples%2Fcms-contentful&project-name=nextjs-contentful-blog&repository-name=nextjs-contentful-blog&demo-title=Next.js+Blog&demo-deion=Static+blog+with+multiple+authors+using+Draft+Mode&demo-url=https%3A%2F%2Fnext-blog-contentful.vercel.app%2F&demo-image=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fv1625705016%2Ffront%2Fexamples%2FCleanShot_2021-07-07_at_19.43.15_2x.png&integration-ids=oac_aZtAZpDfT1lX3zrnWy7KT9VA&env=CONTENTFUL_PREVIEW_SECRET&envDeion=Any%20URL%20friendly%20value%20to%20secure%20Draft%20Mode)

#### Related examples

* [AgilityCMS](https://github.com/vercel/next.js/tree/canary/)
* [Builder.io](https://github.com/vercel/next.js/tree/canary/)
* [ButterCMS](https://github.com/vercel/next.js/tree/canary/)
* [Contentful](https://github.com/vercel/next.js/tree/canary/)
* [Cosmic](https://github.com/vercel/next.js/tree/canary/)
* [DatoCMS](https://github.com/vercel/next.js/tree/canary/)
* [DotCMS](https://github.com/vercel/next.js/tree/canary/)
* [Drupal](https://github.com/vercel/next.js/tree/canary/)
* [Enterspeed](https://github.com/vercel/next.js/tree/canary/)
* [Ghost](https://github.com/vercel/next.js/tree/canary/)
* [GraphCMS](https://github.com/vercel/next.js/tree/canary/)
* [Kontent.ai](https://github.com/vercel/next.js/tree/canary/)
* [MakeSwift](https://github.com/vercel/next.js/tree/canary/)
* [Payload](https://github.com/vercel/next.js/tree/canary/)
* [Plasmic](https://github.com/vercel/next.js/tree/canary/)
* [Prepr](https://github.com/vercel/next.js/tree/canary/)
* [Prismic](https://github.com/vercel/next.js/tree/canary/)
* [Sanity](https://github.com/vercel/next.js/tree/canary/)
* [Sitecore XM Cloud](https://github.com/vercel/next.js/tree/canary/)
* [Sitefinity](https://github.com/vercel/next.js/tree/canary/)
* [Storyblok](https://github.com/vercel/next.js/tree/canary/)
* [TakeShape](https://github.com/vercel/next.js/tree/canary/)
* [Tina](https://github.com/vercel/next.js/tree/canary/)
* [Umbraco](https://github.com/vercel/next.js/tree/canary/)
* [Umbraco heartcore](https://github.com/vercel/next.js/tree/canary/)
* [Webiny](https://github.com/vercel/next.js/tree/canary/)
* [WordPress](https://github.com/vercel/next.js/tree/canary/)
* [Blog Starter](https://github.com/vercel/next.js/tree/canary/)

### How to use

Execute[create-next-app](https://github.com/vercel/next.js/tree/canary/packages/create-next-app)with[npm](https://docs.npmjs.com/cli/init),[Yarn](https://yarnpkg.com/lang/en/docs/cli/create/), or[pnpm](https://pnpm.io)to bootstrap the example:

```
npx create
-
next
-
app
--
example cms
-
contentful cms
-
contentful
-
app
```

```
yarn create next
-
app
--
example cms
-
contentful cms
-
contentful
-
app
```

```
pnpm create next
-
app
--
example cms
-
contentful cms
-
contentful
-
app
```

### Configuration

#### Step 1. Create an account and a space on Contentful

First,[create an account on Contentful](https://www.contentful.com/sign-up/).

After creating an account, create a new empty**space**from the[dashboard](https://app.contentful.com/)and assign to it any name of your liking.

#### Step 2. Create a content model

The[content model](https://www.contentful.com/developers/docs/concepts/data-model/)defines the data structures of your application/websites. The structures are flexible and you can tailor them to your needs.

For this example you need to create a content model that defines an author and a post content type.**You can create these two by running a  or by doing it manually**to familiarize yourself with the Contentful user interface.

This project includes a setup  which you can use to set up the content model expected by the source code.

In your Contentful dashboard go to**Settings > General Settings**and copy the**Space ID**.

Next, go to**Settings > CMA tokens**and create a new token by clicking**Create personal access token**. This token has the same access rights as the logged in user.**Do not share it publicly**, you will only use it to set up your space and can delete it afterwards.

With the space ID and management access token at hand run the following command:

```
npx cross
-
env
CONTENTFUL_SPACE_ID
=
YOUR_SPACE_ID

CONTENTFUL_MANAGEMENT_TOKEN
=
XXX
 npm run setup
```

This command will create the needed content structures and set up your Contentful space ready to use. The output should look as follows:

```jsx
>
 cms
-
contentful@
1.0
.0
 setup
/
Users
/
stefan
.
judis
/
Projects
/
next
.
js
/
examples
/
cms
-
contentful
>
 node
.
/
contentful
/
setup
.
js
 $
CONTENTFUL_SPACE_ID
 $
CONTENTFUL_MANAGEMENT_TOKEN


┌──────────────────────────────────────────────────┐
│
The
 following entities are going to be imported
:
 │
├─────────────────────────────────┬────────────────┤
│
Content

Types
                   │
2
              │
├─────────────────────────────────┼────────────────┤
│
Editor

Interfaces
               │
2
              │
├─────────────────────────────────┼────────────────┤
│
Locales
                         │
1
              │
├─────────────────────────────────┼────────────────┤
│
Webhooks
                        │
0
              │
├─────────────────────────────────┼────────────────┤
│
Entries
                         │
0
              │
├─────────────────────────────────┼────────────────┤
│
Assets
                          │
0
              │
└─────────────────────────────────┴────────────────┘
 ✔
Validating
 content
-
file
 ✔
Initialize

client

(
1
s
)
 ✔
Checking

if
 destination space already has any content and retrieving
it

(
2
s
)
 ✔
Apply
 transformations to source
data

(
1
s
)
 ✔
Push
 content to destination space
   ✔
Connecting
 to
space

(
1
s
)

...

...

...
```

From your contentful space, go to**Content model**and add a new content type:

* Give it the**Name**`Author`, the**Api Identifier**should be`author`

Once the content model is saved, add these fields (you don't have to modify the settings unless specified):

* `name`-**Text**field (type**short text**).**Field ID**should be set to`name`
* `picture`-**Media**field (type**one file**).**Field ID**should be set to`picture`

Save the content type and continue.

From your contentful space, go to**Content model**and add another content type:

* Give it the**Name**`Post`, the**Api Identifier**should be`post`

Next, add these fields (you don't have to modify the settings unless specified):

* `title`-**Text**field (type**short text**)
* `content`-**Rich text**field
* `excerpt`-**Text**field (type**Long text, full-text search**)
* `coverImage`-**Media**field (type**one file**)
* `date`-**Date and time**field
* `slug`-**Text**field. You can optionally go to the settings of this field, and under**Appearance**, select**Slug**to display it as a slug of the`title`field.
* `author`-**Reference**field (type**one reference**)

Save the content type and continue.

#### Step 3. Validate your content model

After setting up the content model (either manually or by running`npm run setup`or`yarn setup`), it should look as follows.

**Content model overview**

#### Step 4. Populate Content

Go to the**Content**section in your space, then click on**Add entry**and select the**Author**content type:

* You just need**1 author entry**.
* Use dummy data for the text.
* For the image, you can download one from[Unsplash](https://unsplash.com/).

Next, create another entry with the content type**Post**:

* We recommend creating at least**2 post entries**.
* Use dummy data for the text.
* For images, you can download them from[Unsplash](https://unsplash.com/).
* Pick the**author**you created earlier.

**Important:**For each entry and asset, you need to click on**Publish**. If not, the entry will be in draft state.

#### Step 5. Set up environment variables

From your contentful space, go to**Settings > API keys**. There will be an example Content delivery / preview token - you can use these API keys. (You may also create a new key.)

Next, copy the`.env.local.example`file in this directory to`.env.local`(which will be ignored by Git):

```
cp
.
env
.
local
.
example

.
env
.
local
```

Then set each variable on`.env.local`:

* `CONTENTFUL_SPACE_ID`should be the**Space ID**field of your API Key
* `CONTENTFUL_ACCESS_TOKEN`should be the**[Content Delivery API](https://www.contentful.com/developers/docs/references/content-delivery-api/)- access token**field of your API key
* `CONTENTFUL_PREVIEW_ACCESS_TOKEN`should be the**[Content Preview API](https://www.contentful.com/developers/docs/references/content-preview-api/)- access token**field of your API key
* `CONTENTFUL_PREVIEW_SECRET`should be any value you want. It must be URL friendly as the dashboard will send it as a query parameter to enable Next.js Draft Mode
* `CONTENTFUL_REVALIDATE_SECRET`should be any value you want. This will be the value you pass in as a secret  from the Contentful Webhook settings to use**[On-Demand Revalidation](https://vercel.com/docs/concepts/next.js/incremental-static-regeneration#on-demand-revalidation)**
* `CONTENTFUL_REVALIDATE_SECRET`should be any value you want. This will be the value you pass in as a secret  from the Contentful Webhook settings to use**[On-Demand Revalidation](https://vercel.com/docs/concepts/next.js/incremental-static-regeneration#on-demand-revalidation)**

Your`.env.local`file should look like this:

```
CONTENTFUL_SPACE_ID
=
...
CONTENTFUL_ACCESS_TOKEN
=
...
CONTENTFUL_PREVIEW_ACCESS_TOKEN
=
...
CONTENTFUL_PREVIEW_SECRET
=
...
CONTENTFUL_REVALIDATE_SECRET
=
...
```

#### Step 6. Run Next.js in development mode

```
npm install
npm run dev


# or


yarn install
yarn dev
```

Your blog should be up and running on[http://localhost:3000](http://localhost:3000)! If it doesn't work, post on[GitHub discussions](https://github.com/vercel/next.js/discussions).

#### Step 7. Try Draft Mode

In your Contentful space, go to**Settings > Content preview**and add a new content preview for development.

The**Name**field may be anything, like`Development`. Then, under**Content preview URLs**, check**Post**and set its value to:

```
http
:
/
/
localhost
:
3000
/
api
/
draft
?
secret
=
<
CONTENTFUL_PREVIEW_SECRET
>
&
slug
=
{
entry
.
fields
.
slug
}
```

Replace`<CONTENTFUL_PREVIEW_SECRET>`with its respective value in`.env.local`.

Once saved, go to one of the posts you've created and:

* **Update the title**. For example, you can add`[Draft]`in front of the title.
* The state of the post will switch to**CHANGED**automatically.**Do not**publish it. By doing this, the post will be in draft state.
* In the , you will see the**Open preview**button. Click on it!

You will now be able to see the updated title. To manually exit Draft Mode, you can igate to`/api/disable-draft`in the browser.

#### Step 8. Deploy on Vercel

You can deploy this app to the cloud with[Vercel](https://vercel.com?utm_source=github&utm_medium=readme&utm_campaign=next-example)([Documentation](https://nextjs.org/docs/deployment)).

To deploy your local project to Vercel, push it to GitHub/GitLab/Bitbucket and[import to Vercel](https://vercel.com/new?utm_source=github&utm_medium=readme&utm_campaign=next-example).

**Important**: When you import your project on Vercel, make sure to click on**Environment Variables**and set them to match your`.env.local`file.

Alternatively, you can deploy using our template by clicking on the Deploy button below.

This will deploy the Next.js project as well as connect it to your Contentful space using the Vercel Contentful Integration. If you are using Draft Mode, make sure to add`CONTENTFUL_PREVIEW_SECRET`as an[Environment Variable](https://vercel.com/docs/concepts/projects/environment-variables)as well.

[](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fvercel%2Fnext.js%2Ftree%2Fcanary%2Fexamples%2Fcms-contentful&project-name=nextjs-contentful-blog&repository-name=nextjs-contentful-blog&demo-title=Next.js+Blog&demo-deion=Static+blog+with+multiple+authors+using+Draft+Mode&demo-url=https%3A%2F%2Fnext-blog-contentful.vercel.app%2F&demo-image=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Fv1625705016%2Ffront%2Fexamples%2FCleanShot_2021-07-07_at_19.43.15_2x.png&integration-ids=oac_aZtAZpDfT1lX3zrnWy7KT9VA&env=CONTENTFUL_PREVIEW_SECRET,CONTENTFUL_REVALIDATE_SECRET&envDeion=Any%20URL%20friendly%20value%20to%20secure%20Your%20App)

#### Step 9. Try using On-Demand Revalidation

In your Contentful space, go to**Settings > Webhooks**and add a new webhook:

* **Give the webhook a name**
* **Activate:**Check the activate checkbox to ensure the webhook is marked as active
* **Specify the POST URL:**Using the URL from your Vercel deployment in step 8, add the path`/api/revalidate`at the end, so it would look something like:`https://<YOUR_VERCEL_DEPLOYMENT_URL>/api/revalidate`Replace`<YOUR_VERCEL_DEPLOYMENT_URL>`with your own deployment URL as noted in the Vercel dashboard.
* **Specify Triggers:**You can choose to trigger for all events or specific events only, such as the Publishing and Unpublishing of Entries and Assets, as shown below.
* **Specify Secret :**Add a secret  named`x-vercel-reval-key`and enter the value of the`CONTENTFUL_REVALIDATE_SECRET`from before.
* **Set Content type:**Set content type to`application/json`in the dropdown.
* **Edit post:**Now, try editing the title of one of your blog posts in Contentful and click Publish. You should see the changed reflected in the website you just deployed, all without triggering a build! Behind the scenes a call was made to the revalidate api that triggers a revalidation of both the landing page and the specific post that was changed.
* **Verify:**You can verify if your request was made successfully by checking the webhook request log on Contentful and checking for a successful 200 status code, or by having your functions tab open on Vercel when committing the change (log drains may also be used). If you are experiencing issues with the api call, ensure you have correctly entered in the value for environment variable`CONTENTFUL_REVALIDATE_SECRET`within your Vercel deployment.

## Related Templates

[Blog Starter KitA statically generated blog example using Next.js and Markdown.by▲ Vercel](/templates/next.js/blog-starter-kit)

[Blog Starter Kit with SanityA statically generated blog example using Next.js and Sanityby▲ Vercel](/templates/next.js/blog-next-sanity)

[Next.js Portfolio with BlogEasily create a portfolio with Next.js and Markdown.by▲ Vercel](/templates/next.js/nextjs-portfolio)

[Blog (with comments)Next.js blog application with Auth0 and UpstashbyAuth0](/templates/next.js/blog-with-comments)

## Unleash New Possibilities

Deploy your app on Vercel and unlock its full potential

## Products

* [AI](/ai)
* [Enterprise](/enterprise)
* [Fluid Compute](/fluid)
* [Next.js](/solutions/nextjs)
* [Observability](/products/observability)
* [Previews](/products/previews)
* [Rendering](/products/rendering)
* [Security](/security)
* [Turbo](/solutions/turborepo)
* [v0](https://v0.dev/)

## Resources

* [Community](https://community.vercel.com/)
* [Docs](/docs)
* [Guides](/guides)
* [Help](/help)
* [Integrations](/integrations)
* [Pricing](/pricing)
* [Resources](/resources)
* [Solution Partners](/partners/solution-partners)
* [Templates](/templates)

## Company

* [About](/about)
* [Blog](/blog)
* [Careers](/careers)
* [Changelog](/changelog)
* [Contact Us](/contact)
* [Customers](/customers)
* [Partners](/partners)
* [Privacy Policy](/legal/privacy-policy)
* Legal

## Social

* [GitHub](https://github.com/vercel)
* [LinkedIn](https://linkedin.com/company/vercel)
* [Twitter](https://x.com/vercel)
* [YouTube](https://youtube.com/@VercelHQ)

[Loading status…](https://vercel-status.com)